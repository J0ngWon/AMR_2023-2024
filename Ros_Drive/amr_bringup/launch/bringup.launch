<?xml version="1.0"?>

<launch>
  <!-- Launch nodes amr_urdf -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
  <param name="robot_description" textfile="$(find robot_urdf)/urdf/robot.urdf" />

  <!-- Launch nodes amr_rplidar -->
  <node name="rplidarNode"          pkg="amr_rplidar"  type="rplidarNode" output="screen">
    <param name="serial_port"         type="string" value="/dev/AMR_RPLIDAR"/>
    <param name="serial_baudrate"     type="int"    value="256000"/>
    <param name="frame_id"            type="string" value="laser_link"/>
    <param name="inverted"            type="bool"   value="false"/>
    <param name="angle_compensate"    type="bool"   value="true"/>
  </node>
  
  <!-- Launch nodes amr_ahrs -->
  <node pkg="amr_ahrs" type="mw_ahrs_driver_node" name="mw_ahrs_driver_node" output="screen">
    <param name="port" value="/dev/AMR_AHRS" />
    <param name="frame_id" value="imu_link" />
    <param name="version" value="v1" />
  </node>
  
  <!-- Launch nodes amr_stm32 -->
  <node name="stm32_serial" pkg="amr_stm32" type="send_stm32.py" output="screen" />
    <param name="serial_port"         type="string" value="/dev/AMR_STM32"/>
    <param name="serial_baudrate"     type="int"    value="115200"/>
  
  <!--
  <node pkg="robot_pose_ekf" type="robot_pose_ekf" name="robot_pose_ekf">
    <param name="output_frame" value="odom"/>
    <param name="base_footprint_frame" value="base_footprint"/>
    <param name="freq" value="20.0"/>
    <param name="sensor_timeout" value="1.0"/>
    <param name="odom_used" value="true"/>
    <param name="imu_used" value="true"/>
    <param name="vo_used" value="true"/>
    <param name="debug" value="false"/>
    <param name="self_diagnose" value="false"/>
    <param name="wheelodom_covariance" value="[0.1, 0, 0, 0, 0, 0, 0, 0, 0.1]"/>
  </node>
  -->
  
</launch>
